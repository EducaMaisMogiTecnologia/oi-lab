#!/bin/bash

s=seat-sm501
l=lvds
v=vga

sm501_l=( $(find /sys/devices -name "sm501-fb*") )
sm501_v=( $(find /sys/devices -name "sm501-usb*") )

case ${1} in
    *1)
        seat_id=${s}-0-${l}
        seat_master_device=${sm501_l[0]}
     ;;
    *2)
        seat_id=${s}-0-${v}
        seat_master_device=${sm501_v[0]}
    ;;
    *3)
        if (( ${#sm501_l[@]} > 1 ))
        then
            seat_id=${s}-1-${l}
            seat_master_device=${sm501_l[1]}
        fi
    ;;
    *4)
        if (( ${#sm501_v[@]} > 1 ))
        then
            seat_id=${s}-1-${v}
            seat_master_device=${sm501_v[1]}
        fi
    ;;
esac

if [[ ${seat_id} ]]
then
   if [[ ${seat_master_device} ]]
   then
       loginctl attach ${seat_id} ${seat_master_device}
   fi

   loginctl attach ${seat_id} /sys/${1}
fi
